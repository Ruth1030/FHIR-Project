<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Example SMART App</title>
    <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
</head>
<body>
    <h1>我的醫療管理系統</h1>
    <div id="my-display-area">資料讀取中...</div>

    <script>
        // 等待 SMART 授權握手完成
        FHIR.oauth2.ready()
            .then(function(client) {
                // ★ 成功！這裡就是「正式開始」的地方 ★
                
                // client 就是您的通行證，用它來抓資料
                console.log("握手成功，目前的病人 ID 是:", client.patient.id);

                // 範例：抓取病人基本資料
                client.patient.read().then(function(patientData) {
                    // 把資料交給您的顯示邏輯
                    console.log(patientData);
                    // 這裡可以呼叫您自己寫的 UI 更新函式，例如：
                    // updateMyUI(patientData); 
                });

                // 範例：抓取其他的 FHIR 資源 (例如: Observation)
                // client.request("Observation?patient=" + client.patient.id)...
            })
            .catch(function(error) {
                // 失敗處理
                console.error("連線失敗:", error);
            });
    </script>
</body>
</body>
</html>
